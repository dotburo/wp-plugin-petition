!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,i){(function(t){
/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */
(function(t,e,n){"use strict";var r=function(t,e,i){i=s.extend({},s.options,i);var n=s.runValidations(t,e,i);if(n.some((function(t){return s.isPromise(t.error)})))throw new Error("Use validate.async if you want support for promises");return r.processValidationResults(n,i)},s=r;s.extend=function(t){return[].slice.call(arguments,1).forEach((function(e){for(var i in e)t[i]=e[i]})),t},s.extend(r,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var t=s.format("%{major}.%{minor}.%{patch}",s.version);return s.isEmpty(s.version.metadata)||(t+="+"+s.version.metadata),t}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,e,i){var n,r,o,a,u,l,c,f=[];for(n in(s.isDomElement(t)||s.isJqueryElement(t))&&(t=s.collectFormValues(t)),e)for(r in o=s.getDeepObjectValue(t,n),a=s.result(e[n],o,t,n,i,e)){if(!(u=s.validators[r]))throw c=s.format("Unknown validator %{name}",{name:r}),new Error(c);l=a[r],(l=s.result(l,o,t,n,i,e))&&f.push({attribute:n,value:o,validator:r,globalOptions:i,attributes:t,options:l,error:u.call(u,o,l,n,t,i)})}return f},processValidationResults:function(t,e){t=s.pruneEmptyErrors(t,e),t=s.expandMultipleErrors(t,e),t=s.convertErrorMessages(t,e);var i=e.format||"grouped";if("function"!=typeof s.formatters[i])throw new Error(s.format("Unknown format %{format}",e));return t=s.formatters[i](t),s.isEmpty(t)?void 0:t},async:function(t,e,i){var n=(i=s.extend({},s.async.options,i)).wrapErrors||function(t){return t};!1!==i.cleanAttributes&&(t=s.cleanAttributes(t,e));var r=s.runValidations(t,e,i);return new s.Promise((function(o,a){s.waitForResults(r).then((function(){var u=s.processValidationResults(r,i);u?a(new n(u,i,t,e)):o(t)}),(function(t){a(t)}))}))},single:function(t,e,i){return i=s.extend({},s.single.options,i,{format:"flat",fullMessages:!1}),s({single:t},{single:e},i)},waitForResults:function(t){return t.reduce((function(t,e){return s.isPromise(e.error)?t.then((function(){return e.error.then((function(t){e.error=t||null}))})):t}),new s.Promise((function(t){t()})))},result:function(t){var e=[].slice.call(arguments,1);return"function"==typeof t&&(t=t.apply(null,e)),t},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},isFunction:function(t){return"function"==typeof t},isInteger:function(t){return s.isNumber(t)&&t%1==0},isBoolean:function(t){return"boolean"==typeof t},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return null!=t},isPromise:function(t){return!!t&&s.isFunction(t.then)},isJqueryElement:function(t){return t&&s.isString(t.jquery)},isDomElement:function(t){return!!t&&(!(!t.querySelectorAll||!t.querySelector)&&(!(!s.isObject(document)||t!==document)||("object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)))},isEmpty:function(t){var e;if(!s.isDefined(t))return!0;if(s.isFunction(t))return!1;if(s.isString(t))return s.EMPTY_STRING_REGEXP.test(t);if(s.isArray(t))return 0===t.length;if(s.isDate(t))return!1;if(s.isObject(t)){for(e in t)return!1;return!0}return!1},format:s.extend((function(t,e){return s.isString(t)?t.replace(s.format.FORMAT_REGEXP,(function(t,i,n){return"%"===i?"%{"+n+"}":String(e[n])})):t}),{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return s.isNumber(t)?100*t%1==0?""+t:parseFloat(Math.round(100*t)/100).toFixed(2):s.isArray(t)?t.map((function(t){return s.prettify(t)})).join(", "):s.isObject(t)?s.isDefined(t.toString)?t.toString():JSON.stringify(t):(t=""+t).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,(function(t,e,i){return e+" "+i.toLowerCase()})).toLowerCase()},stringifyValue:function(t,e){return(e&&e.prettify||s.prettify)(t)},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"==={}.toString.call(t)},isHash:function(t){return s.isObject(t)&&!s.isArray(t)&&!s.isFunction(t)},contains:function(t,e){return!!s.isDefined(t)&&(s.isArray(t)?-1!==t.indexOf(e):e in t)},unique:function(t){return s.isArray(t)?t.filter((function(t,e,i){return i.indexOf(t)==e})):t},forEachKeyInKeypath:function(t,e,i){if(s.isString(e)){var n,r="",o=!1;for(n=0;n<e.length;++n)switch(e[n]){case".":o?(o=!1,r+="."):(t=i(t,r,!1),r="");break;case"\\":o?(o=!1,r+="\\"):o=!0;break;default:o=!1,r+=e[n]}return i(t,r,!0)}},getDeepObjectValue:function(t,e){if(s.isObject(t))return s.forEachKeyInKeypath(t,e,(function(t,e){if(s.isObject(t))return t[e]}))},collectFormValues:function(t,e){var i,n,r,o,a,u,l={};if(s.isJqueryElement(t)&&(t=t[0]),!t)return l;for(e=e||{},o=t.querySelectorAll("input[name], textarea[name]"),i=0;i<o.length;++i)if(r=o.item(i),!s.isDefined(r.getAttribute("data-ignored"))){var c=r.name.replace(/\./g,"\\\\.");u=s.sanitizeFormValue(r.value,e),"number"===r.type?u=u?+u:null:"checkbox"===r.type?r.attributes.value?r.checked||(u=l[c]||null):u=r.checked:"radio"===r.type&&(r.checked||(u=l[c]||null)),l[c]=u}for(o=t.querySelectorAll("select[name]"),i=0;i<o.length;++i)if(r=o.item(i),!s.isDefined(r.getAttribute("data-ignored"))){if(r.multiple)for(n in u=[],r.options)(a=r.options[n])&&a.selected&&u.push(s.sanitizeFormValue(a.value,e));else{var f=void 0!==r.options[r.selectedIndex]?r.options[r.selectedIndex].value:"";u=s.sanitizeFormValue(f,e)}l[r.name]=u}return l},sanitizeFormValue:function(t,e){return e.trim&&s.isString(t)&&(t=t.trim()),!1!==e.nullify&&""===t?null:t},capitalize:function(t){return s.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter((function(t){return!s.isEmpty(t.error)}))},expandMultipleErrors:function(t){var e=[];return t.forEach((function(t){s.isArray(t.error)?t.error.forEach((function(i){e.push(s.extend({},t,{error:i}))})):e.push(t)})),e},convertErrorMessages:function(t,e){var i=[],n=(e=e||{}).prettify||s.prettify;return t.forEach((function(t){var r=s.result(t.error,t.value,t.attribute,t.options,t.attributes,t.globalOptions);s.isString(r)?("^"===r[0]?r=r.slice(1):!1!==e.fullMessages&&(r=s.capitalize(n(t.attribute))+" "+r),r=r.replace(/\\\^/g,"^"),r=s.format(r,{value:s.stringifyValue(t.value,e)}),i.push(s.extend({},t,{error:r}))):i.push(t)})),i},groupErrorsByAttribute:function(t){var e={};return t.forEach((function(t){var i=e[t.attribute];i?i.push(t):e[t.attribute]=[t]})),e},flattenErrorsToArray:function(t){return t.map((function(t){return t.error})).filter((function(t,e,i){return i.indexOf(t)===e}))},cleanAttributes:function(t,e){function i(t,e,i){return s.isObject(t[e])?t[e]:t[e]=!!i||{}}return s.isObject(e)&&s.isObject(t)?function t(e,i){if(!s.isObject(e))return e;var n,r,o=s.extend({},e);for(r in e)n=i[r],s.isObject(n)?o[r]=t(o[r],n):n||delete o[r];return o}(t,e=function(t){var e,n={};for(e in t)t[e]&&s.forEachKeyInKeypath(n,e,i);return n}(e)):{}},exposeModule:function(t,e,i,n,r){i?(n&&n.exports&&(i=n.exports=t),i.validate=t):(e.validate=t,t.isFunction(r)&&r.amd&&r([],(function(){return t})))},warn:function(t){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+t)}}),r.validators={presence:function(t,e){if(!1!==(e=s.extend({},this.options,e)).allowEmpty?!s.isDefined(t):s.isEmpty(t))return e.message||this.message||"can't be blank"},length:function(t,e,i){if(s.isDefined(t)){var n,r=(e=s.extend({},this.options,e)).is,o=e.maximum,a=e.minimum,u=[],l=(t=(e.tokenizer||function(t){return t})(t)).length;return s.isNumber(l)?(s.isNumber(r)&&l!==r&&(n=e.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",u.push(s.format(n,{count:r}))),s.isNumber(a)&&l<a&&(n=e.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",u.push(s.format(n,{count:a}))),s.isNumber(o)&&l>o&&(n=e.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",u.push(s.format(n,{count:o}))),u.length>0?e.message||u:void 0):e.message||this.notValid||"has an incorrect length"}},numericality:function(t,e,i,n,r){if(s.isDefined(t)){var o,a,u=[],l={greaterThan:function(t,e){return t>e},greaterThanOrEqualTo:function(t,e){return t>=e},equalTo:function(t,e){return t===e},lessThan:function(t,e){return t<e},lessThanOrEqualTo:function(t,e){return t<=e},divisibleBy:function(t,e){return t%e==0}},c=(e=s.extend({},this.options,e)).prettify||r&&r.prettify||s.prettify;if(s.isString(t)&&e.strict){var f="^-?(0|[1-9]\\d*)";if(e.onlyInteger||(f+="(\\.\\d+)?"),f+="$",!new RegExp(f).test(t))return e.message||e.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==e.noStrings&&s.isString(t)&&!s.isEmpty(t)&&(t=+t),!s.isNumber(t))return e.message||e.notValid||this.notValid||this.message||"is not a number";if(e.onlyInteger&&!s.isInteger(t))return e.message||e.notInteger||this.notInteger||this.message||"must be an integer";for(o in l)if(a=e[o],s.isNumber(a)&&!l[o](t,a)){var d="not"+s.capitalize(o),h=e[d]||this[d]||this.message||"must be %{type} %{count}";u.push(s.format(h,{count:a,type:c(o)}))}return e.odd&&t%2!=1&&u.push(e.notOdd||this.notOdd||this.message||"must be odd"),e.even&&t%2!=0&&u.push(e.notEven||this.notEven||this.message||"must be even"),u.length?e.message||u:void 0}},datetime:s.extend((function(t,e){if(!s.isFunction(this.parse)||!s.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(s.isDefined(t)){var i,n=[],r=(e=s.extend({},this.options,e)).earliest?this.parse(e.earliest,e):NaN,o=e.latest?this.parse(e.latest,e):NaN;return t=this.parse(t,e),isNaN(t)||e.dateOnly&&t%864e5!=0?(i=e.notValid||e.message||this.notValid||"must be a valid date",s.format(i,{value:arguments[0]})):(!isNaN(r)&&t<r&&(i=e.tooEarly||e.message||this.tooEarly||"must be no earlier than %{date}",i=s.format(i,{value:this.format(t,e),date:this.format(r,e)}),n.push(i)),!isNaN(o)&&t>o&&(i=e.tooLate||e.message||this.tooLate||"must be no later than %{date}",i=s.format(i,{date:this.format(o,e),value:this.format(t,e)}),n.push(i)),n.length?s.unique(n):void 0)}}),{parse:null,format:null}),date:function(t,e){return e=s.extend({},e,{dateOnly:!0}),s.validators.datetime.call(s.validators.datetime,t,e)},format:function(t,e){(s.isString(e)||e instanceof RegExp)&&(e={pattern:e});var i,n=(e=s.extend({},this.options,e)).message||this.message||"is invalid",r=e.pattern;if(s.isDefined(t))return s.isString(t)?(s.isString(r)&&(r=new RegExp(e.pattern,e.flags)),(i=r.exec(t))&&i[0].length==t.length?void 0:n):n},inclusion:function(t,e){if(s.isDefined(t)&&(s.isArray(e)&&(e={within:e}),e=s.extend({},this.options,e),!s.contains(e.within,t))){var i=e.message||this.message||"^%{value} is not included in the list";return s.format(i,{value:t})}},exclusion:function(t,e){if(s.isDefined(t)&&(s.isArray(e)&&(e={within:e}),e=s.extend({},this.options,e),s.contains(e.within,t))){var i=e.message||this.message||"^%{value} is restricted";return s.isString(e.within[t])&&(t=e.within[t]),s.format(i,{value:t})}},email:s.extend((function(t,e){var i=(e=s.extend({},this.options,e)).message||this.message||"is not a valid email";if(s.isDefined(t))return s.isString(t)&&this.PATTERN.exec(t)?void 0:i}),{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(t,e,i,n,r){if(s.isDefined(t)){s.isString(e)&&(e={attribute:e});var o=(e=s.extend({},this.options,e)).message||this.message||"is not equal to %{attribute}";if(s.isEmpty(e.attribute)||!s.isString(e.attribute))throw new Error("The attribute must be a non empty string");var a=s.getDeepObjectValue(n,e.attribute),u=e.comparator||function(t,e){return t===e},l=e.prettify||r&&r.prettify||s.prettify;return u(t,a,e,i,n)?void 0:s.format(o,{attribute:l(e.attribute)})}},url:function(t,e){if(s.isDefined(t)){var i=(e=s.extend({},this.options,e)).message||this.message||"is not a valid url",n=e.schemes||this.schemes||["http","https"],r=e.allowLocal||this.allowLocal||!1,o=e.allowDataUrl||this.allowDataUrl||!1;if(!s.isString(t))return i;var a="^(?:(?:"+n.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",u="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(r?u+="?":a+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",a+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+u+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",o){a="(?:"+a+")|(?:^data:(?:\\w+\\/[-+.\\w]+(?:;[\\w=]+)*)?(?:;base64)?,[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*$)"}return new RegExp(a,"i").exec(t)?void 0:i}},type:s.extend((function(t,e,i,n,r){if(s.isString(e)&&(e={type:e}),s.isDefined(t)){var o,a=s.extend({},this.options,e),u=a.type;if(!s.isDefined(u))throw new Error("No type was specified");if(o=s.isFunction(u)?u:this.types[u],!s.isFunction(o))throw new Error("validate.validators.type.types."+u+" must be a function.");if(!o(t,a,i,n,r)){var l=e.message||this.messages[u]||this.message||a.message||(s.isFunction(u)?"must be of the correct type":"must be of type %{type}");return s.isFunction(l)&&(l=l(t,e,i,n,r)),s.format(l,{attribute:s.prettify(i),type:u})}}}),{types:{object:function(t){return s.isObject(t)&&!s.isArray(t)},array:s.isArray,integer:s.isInteger,number:s.isNumber,string:s.isString,date:s.isDate,boolean:s.isBoolean},messages:{}})},r.formatters={detailed:function(t){return t},flat:s.flattenErrorsToArray,grouped:function(t){var e;for(e in t=s.groupErrorsByAttribute(t))t[e]=s.flattenErrorsToArray(t[e]);return t},constraint:function(t){var e;for(e in t=s.groupErrorsByAttribute(t))t[e]=t[e].map((function(t){return t.validator})).sort();return t}},r.exposeModule(r,this,t,e,i(0))}).call(this,e,t,i(0))}).call(this,i(2)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";function n(t){return Array.prototype.slice.call(t)}i.r(e);const r=(t,e)=>{for(t=t.parentElement;t;){if(t.matches.call(t,e))return t;t=t.parentElement}return null};var s=i(1),o=i.n(s);let a=wp.i18n.__,u=wp.i18n.sprintf,l=a("First Name","swi-petition"),c=a("Last Name","swi-petition"),f=a("Email","swi-petition"),d=a("Zip Code","swi-petition");var h={swi_petition_fname:{presence:{allowEmpty:!1,message:"^"+u(a("The %s field cannot be blank.","swi-petition"),l)}},swi_petition_lname:{presence:{allowEmpty:!1,message:"^"+u(a("This %s field cannot be blank.","swi-petition"),c)}},swi_petition_email:{presence:{allowEmpty:!1,message:"^"+u(a("This %s field cannot be blank.","swi-petition"),f)},format:{pattern:'^(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$',message:"^"+a("Your email address seems wrong.","swi-petition")}},swi_petition_zip:{presence:{allowEmpty:!1,message:"^"+u(a("This %s field cannot be blank.","swi-petition"),d)},format:{pattern:"^[0-9]{4}$",message:"^"+a("The zip code format is wrong.","swi-petition")}},swi_petition_age:{presence:{message:"^"+a("Please confirm your age.","swi-petition")},inclusion:{within:[!0],message:"^"+a("Please confirm your age.","swi-petition")}}};class m{constructor(t,e={}){this.selectors=Object.assign({invalidFeedback:".invalid-feedback",fieldParent:".form-group"},e.selectors||{}),this.url=e.url,this.include=e.include,this.cb=e.cb,this.redirect=e.redirect,this.el=t,this.form=this.getForm(t),this.formFeedback=this.el.querySelector("form > "+this.selectors.invalidFeedback),this.bindForm()}bindForm(){this.form.addEventListener("input",t=>{this.validateField(t.target)}),this.form.addEventListener("submit",t=>(t.preventDefault(),this.validateFields(!0)&&this.submit(),!1))}submit(){window.fetch(this.url,{method:"POST",body:this.getValues(!0),credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).then(t=>(t.ok&&this.clearFields(),t.json())).then(t=>{t.data&&t.data.error?this.showErrorMsg(null,[t.data.error],!0):this.onSuccess()}).catch(t=>{this.showErrorMsg(null,[t.message],!0)})}onSuccess(){this.cb&&this.cb(),this.redirect&&(window.location=this.redirect)}validateFields(t=!0){let e=this.getFields();for(let i=0;i<e.length;i++)if(!this.validateField(e[i],t))return!1;return!0}validateField(t,e=!1){let i=this.getValue(t),n=o()({[t.name]:i},{[t.name]:h[t.name]});return n&&n[t.name]?this.showFieldError(t,n[t.name],e):this.hideFieldError(t)}showFieldError(t,e,i=!1){let n=r(t,this.selectors.fieldParent).querySelector(this.selectors.invalidFeedback);return this.showErrorMsg(n,e,i),t.classList.add("is-invalid"),!1}showErrorMsg(t,e,i=!1){(t=t||(i?this.formFeedback:null))&&(t.textContent=e.shift(),t.style.display="block")}hideFieldError(t){let e=r(t,this.selectors.fieldParent).querySelector(this.selectors.invalidFeedback);return e?e.style.display="none":this.formFeedback&&(this.formFeedback.style.display="none"),t.classList.remove("is-invalid"),!0}clearFields(){this.getFields().forEach(t=>t.value="")}getFields(t=this.el){return n(t.querySelectorAll("input, textarea, select"))}getValue(t){let e=t.type.toLowerCase();return"checkbox"===e||"radio"===e?t.checked:t.value}getValues(t=!1){let e={};return this.getFields().forEach(t=>{e[t.name]=this.getValue(t)}),t?(e=Object.assign(e,this.include),Object.keys(e).map(t=>t+"="+e[t]).join("&")):e}getForm(t=this.el){return"FORM"===t.tagName?t:this.el.querySelector("form")}}class p{constructor(t,e,i={}){this.el=t,this.poller=e,this.options=Object.assign(i,{strokeWidth:10}),this.render(),this.dom={num:this.el.querySelector(".swi-petition-counter-number"),circle:this.el.getElementsByTagName("circle")[0]},this.pathLength=this.dom.circle.getTotalLength(),this.poller.addCallback(this.update.bind(this))}render(){const t=this.options.strokeWidth/2;this.el.innerHTML='<div class="swi-petition-counter-number"></div><svg fill="none" stroke="#fff"><circle r="80" cx="110" cy="110" stroke-width="0"></circle><circle r="'+(80-t)+'" cx="110" cy="110" stroke-width="1"></circle><circle r="'+(80+t)+'" cx="110" cy="110" stroke-width="1"></circle></svg>'}update(t,e){this.dom.num.textContent=t,this.dom.circle.style.strokeWidth=this.options.strokeWidth,this.dom.circle.style.strokeDasharray=this.pathLength+"px";let i=100-t/e*100;this.dom.circle.style.strokeDashoffset=this.pathLength*i/100+"px"}}class g{constructor(t){this.options=t,this.callbacks=[],this.goal=t.goal,this.count=t.count,this.percent=100-this.count/this.goal*100,this.initialOffset=Math.max(0,this.count-5),this.delay=t.delay,this._startWithOffset()}trigger(){this._getCount()}addCallback(t){this.callbacks.push(t)}_setTimeout(){window.setTimeout(()=>{this._getCount()},this.delay)}_startWithOffset(){window.setTimeout(()=>{this.initialOffset<=this.count?(this._runCallbacks(this.initialOffset++),this._startWithOffset(this.initialOffset)):this._getCount()},500+1100*Math.random(0,1))}_getCount(){let t=this.options.url+"?action=swi_petition_poll&swi_petition="+this.options.id;window.fetch(t).then(t=>{if(t.ok)return t.json()}).then(t=>{this._runCallbacks(t),this._setTimeout()}).catch(t=>{console.log(t)})}_runCallbacks(t){this.callbacks.forEach(e=>{e(t,this.goal)})}}class b{constructor(t,e){t.addCallback(t=>{e.textContent=t})}}!function(t,e,i){let r=e.getElementsByClassName("swi-petition-form"),s=e.getElementsByClassName("swi-petition-counter"),o=e.getElementsByClassName("swi-petition-number");i=Object.assign(i,{delay:i.pollInterval||1e4});const a=new g(i);n(s).map(t=>new p(t,a,{strokeWidth:10})),n(o).map(t=>new b(a,t)),n(r).forEach(t=>{new m(t,{cb:a.trigger.bind(a),redirect:i.redirect,url:i.url,include:{_ajax_nonce:i.nonce,action:"swi_petition_submit",swi_petition:i.id}})})}(window,document,window.swiPetition)}]);